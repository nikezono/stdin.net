<!DOCTYPE html>

<html>
<head>
  <title>#</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="../docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <h1 id="-">#</h1>

            </div>
            
            <div class="content"><div class='highlight'><pre>
app.coffee
Express/Httpの設定ファイル</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <h1 id="-">#</h1>

            </div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>Api Dependencies</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>path         = <span class="hljs-built_in">require</span> <span class="hljs-string">'path'</span>
events       = <span class="hljs-built_in">require</span> <span class="hljs-string">'events'</span></pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>Module Dependencies</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-built_in">require</span>.all  = <span class="hljs-built_in">require</span> <span class="hljs-string">'direquire'</span>
express      = <span class="hljs-built_in">require</span> <span class="hljs-string">'express'</span>
mongoose     = <span class="hljs-built_in">require</span> <span class="hljs-string">'mongoose'</span>
errorhandler = <span class="hljs-built_in">require</span> <span class="hljs-string">'errorhandler'</span>
bodyParser   = <span class="hljs-built_in">require</span> <span class="hljs-string">'body-parser'</span>
morgan       = <span class="hljs-built_in">require</span> <span class="hljs-string">'morgan'</span></pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>Static Files</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>st = <span class="hljs-built_in">require</span>(<span class="hljs-string">'st'</span>)(
  <span class="hljs-attribute">url</span>: <span class="hljs-string">'/public'</span>
  <span class="hljs-attribute">path</span>: path.resolve <span class="hljs-string">'public'</span>
  <span class="hljs-attribute">index</span>: <span class="hljs-literal">yes</span>
  <span class="hljs-attribute">passthrough</span>: <span class="hljs-literal">yes</span>
)

app = express()</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>env</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>app.set <span class="hljs-string">'env'</span>, process.env.NODE_ENV || <span class="hljs-string">'development'</span>
app.set <span class="hljs-string">'port'</span>, process.env.PORT || <span class="hljs-number">3000</span>
app.set <span class="hljs-string">'feed crawler queue'</span>, process.env.FEEDQUEUE || <span class="hljs-number">10</span> <span class="hljs-comment"># RSSクローラの並列処理可能数</span>
app.set <span class="hljs-string">'hatena crawler queue'</span>, process.env.HATENAQUEUE || <span class="hljs-number">2</span> <span class="hljs-comment"># はてなクローラ(フィード探索)の並列処理可能数</span>
app.set <span class="hljs-string">'timer interval'</span>, process.env.TIMERINTERVAL || <span class="hljs-number">1000</span>*<span class="hljs-number">60</span>*<span class="hljs-number">5</span> <span class="hljs-comment"># フィード取得のインターバル(5分)</span></pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>views</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>app.set <span class="hljs-string">"views"</span>, path.resolve <span class="hljs-string">"views"</span>
app.set <span class="hljs-string">"view engine"</span>, <span class="hljs-string">"jade"</span>
app.disable <span class="hljs-string">'x-powered-by'</span></pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>require event/models</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>app.set <span class="hljs-string">'models'</span>,  <span class="hljs-built_in">require</span>.all path.resolve <span class="hljs-string">'models'</span>
app.set <span class="hljs-string">'events'</span>,  <span class="hljs-built_in">require</span>.all path.resolve <span class="hljs-string">'events'</span></pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>middlewares</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>app.use morgan(<span class="hljs-string">'combined'</span>)
app.use bodyParser.urlencoded({<span class="hljs-attribute">extended</span>:<span class="hljs-literal">false</span>})
app.use bodyParser.json()
app.use errorhandler() <span class="hljs-keyword">if</span> app.get(<span class="hljs-string">'env'</span>) <span class="hljs-keyword">is</span> <span class="hljs-string">'development'</span>
app.use st</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>Routes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>(<span class="hljs-built_in">require</span> path.resolve <span class="hljs-string">'routes'</span>,<span class="hljs-string">'httpRoutes'</span>) app

mongodb_uri = process.env.MONGOLAB_URI <span class="hljs-keyword">or</span>
              process.env.MONGOHQ_URL <span class="hljs-keyword">or</span>
              <span class="hljs-string">'mongodb://localhost/stdin'</span>

mongoose.connect mongodb_uri

exports = <span class="hljs-built_in">module</span>.exports = app</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
